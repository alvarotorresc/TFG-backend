# Migration `20200508175200-schema-created`

This migration has been generated by alvarotorresc at 5/8/2020, 5:52:00 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Ocurrence" ADD COLUMN "phenomenaId" text  NOT NULL ;

ALTER TABLE "public"."Phenomena" ADD COLUMN "researcherId" text  NOT NULL ;

ALTER TABLE "public"."Ocurrence" ADD FOREIGN KEY ("phenomenaId")REFERENCES "public"."Phenomena"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Phenomena" ADD FOREIGN KEY ("researcherId")REFERENCES "public"."Researcher"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200508174731-models..20200508175200-schema-created
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum Rol {
   Admin
@@ -22,35 +22,41 @@
   UFOLOGY
 }
 model Researcher {
-  id          String   @default(uuid()) @id
-  email       String   @unique
+  id          String      @default(uuid()) @id
+  email       String      @unique
   password    String
   firstName   String
   lastName    String
   age         Int
   nationality String
   image       String
   rol         Rol
-  updatedAt   DateTime @updatedAt
-  createdAt   DateTime @default(now())
+  phenomena   Phenomena[]
+  updatedAt   DateTime    @updatedAt
+  createdAt   DateTime    @default(now())
 }
 model Phenomena {
-  id          String   @default(uuid()) @id
-  title       String
-  description String
-  type        Types
-  updatedAt   DateTime @updatedAt
-  createdAt   DateTime @default(now())
+  id           String      @default(uuid()) @id
+  title        String
+  description  String
+  type         Types
+  updatedAt    DateTime    @updatedAt
+  createdAt    DateTime    @default(now())
+  researcher   Researcher  @relation(fields: [researcherId], references: [id])
+  researcherId String
+  ocurrences   Ocurrence[]
 }
 model Ocurrence {
-  id          String   @default(uuid()) @id
+  id          String    @default(uuid()) @id
   date        DateTime
   description String
   witness     Boolean
   resolved    Boolean
-  updatedAt   DateTime @updatedAt
-  createdAt   DateTime @default(now())
+  updatedAt   DateTime  @updatedAt
+  createdAt   DateTime  @default(now())
+  phenomena   Phenomena @relation(fields: [phenomenaId], references: [id])
+  phenomenaId String
 }
```


